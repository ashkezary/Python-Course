# جلسه بیستم

در این جلسه به چند چیز متفرقه می‌پردازیم که می‌توانند محتوای تکمیلی درس ما باشند. داده‌ساختار تاپل، zip کردن و unzip کردن و توابع کوتاه و فشرده که آن‌ها را با نام `lambda function` می‌شناسند.
# تاپل
اگر بخواهیم لیستی با اعضای ثابت و غیرقابل تغییر (immutable) داشته باشیم، می‌توانیم از داده‌ساختار tuple استفاده کنیم. برای تعریف یک tuple می‌توانید به شکل زیر عمل کنید:
```python
ds1 = ()
ds2 = tuple()
ds3 = (1,2,3,4,5)
```
در قطعه کد بالا و در دو خط اول تاپل خالی ساخته شده که با توجه به غیرقابل‌تغییر بودن تاپل، چنین چیزی بی‌فایده خواهد بود و در خط سوم تاپلی از اعداد ساخته شده است. این امکان وجود دارد که لیست یا مجموعه را به تاپل تبدیل کنیم. دسترسی به اعضای تاپل نیز مشابه لیست است (مثلاً در کد بالا می‌توان از `ds3[0]` برای دسترسی به اولین عضو تاپل استفاده کرد) اما برخلاف لیست، اگر بخواهیم یک عضو تاپل را تغییر دهیم (مثلاً `ds3[0] = 20`)، با `TypeError` مواجه می‌شویم.

در کل، داده‌ساختار تاپل کاربردهای محدودتری از لیست دارد و ممکن است شما سال‌ها برنامه‌نویسی کنید و اصلاً از تاپل استفاده نکنید. فقط اگر جایی به لیستی غیرقابل‌تغییر نیاز داشتید، می‌توانید از تاپل استفاده کنید.

# زیپ
اگر بخواهیم روی چند چیز با هم پیمایش کنیم، می‌توانیم از تابع آماده‌ی `zip` استفاده کنیم. این تابع چیزی را به ما برمی‌گرداند که بتوانیم چیزها را با هم پیمایش کنیم. در ادامه مثالی از آن را می‌توانید ملاحظه کنید:
```python
fighters = ['F-4', 'F-5', 'F-14', 'F-16']
names = ['Phantom', 'Tiger', 'Tomcat', 'Falcon']
for x, y in zip(fighters, names):
    print(x, y)
```
اگر صرفاً خود zip را چاپ کنیم، یک چیز بی‌معنا نمایش داده می‌شود. در صورتی که بخواهیم zip را به شکل مناسبی نگه داریم، می‌توانیم آن را به لیست یا دیکشنری تبدیل کنیم:
```python
aircrafts1 = list(zip(fighters, names))
aircrafts2 = dict(zip(fighters, names))
print(aircrafts1)
print(aircrafts2)
```
که به ترتیب، خروجی‌‌ها به شکل زیر خواهد شد:
```
[('F-4', 'Phantom'), ('F-5', 'Tiger'), ('F-14', 'Tomcat'), ('F-16', 'Falcon')]
{'F-4': 'Phantom', 'F-5': 'Tiger', 'F-14': 'Tomcat', 'F-16': 'Falcon'}
```
دفت کنید که اگر zip را به لیست تبدیل کنیم، لیستی از تاپل‌ها خواهیم داشت.

با استفاده از دستور zip می‌توانیم عکس کار بالا را نیز انجام دهیم. یعنی یک لیستی از تاپل‌ها را به چند تاپل فرو بشکنیم. برای این کار به صورت زیر از `zip(*)` استفاده می‌کنیم:
```python
mylist = [('F-4', 'Phantom'), ('F-5', 'Tiger'), ('F-14', 'Tomcat'), ('F-16', 'Falcon')]
x, y = zip(*mylist)
print(x)
print(y)
```
نتیجه به شکل زیر خواهد شد:
```
('F-4', 'F-5', 'F-14', 'F-16')
('Phantom', 'Tiger', 'Tomcat', 'Falcon')
```
**نکته ۱.** توجه کنید که با دستور `zip(*)` نمی‌توان دیکشنری را تجزیه کرد. برای تجزیه مقادیر دیکشنری به راحتی می‌توانید از `dict.keys()` و `dict.values()` استفاده کرد.

**نکته ۲.** عملیات zip کردن و unzip کردن را می‌توان روی بیش از دو لیست نیز انجام داد. برای مثال، در قطعه کد زیر سه لیست با هم zip شده‌اند:
```python
number = [1,2,3,4]
fighters = ['F-4', 'F-5', 'F-14', 'F-16']
names = ['Phantom', 'Tiger', 'Tomcat', 'Falcon']
for w, x, y in zip(number, fighters, names):
    print(w, x, y)
```

**نکته ۳.** یک کاربرد بسیار کمک‌کننده‌ی zip ساختن دیکشنری از روی دو لیست است. اگر بخواهیم بدون zip این کار را انجام دهیم، به شکل زیر انجام می‌دهیم:
```python
fighters = ['F-4', 'F-5', 'F-14', 'F-16']
names = ['Phantom', 'Tiger', 'Tomcat', 'Falcon']
i = 0
n = len(names)
mydict = {}
while i<n:
    mydict[fighters[i]] = names[i]
    i += 1
```
ولی با استفاده از zip به سادگی و به شکل زیر می‌توانیم این کار را انجام دهیم:
```python
fighters = ['F-4', 'F-5', 'F-14', 'F-16']
names = ['Phantom', 'Tiger', 'Tomcat', 'Falcon']
mydict = dict(zip(fighters, names))
```
# تابع لامبدا
در نوشتن درسنامه‌ی این قسمت، از آموزش پایتون سایت اسکریمبا (https://scrimba.com/learn-python-c03) استفاده شده است.
هرگاه بخواهیم به طور مختصر تابعی را بنویسیم، می‌توانیم از تابع لامبدا استفاده کنیم. برای مثال، تابع زیر را درنظر بگیرید:
```python
def myadd(x,y):
    return x+y
```
به کمک lambda می‌توانیم این تابع را به این صورت بنویسیم:
```python
myadd1 = lambda x,y: x+y
```
قالب کلی تابع lambda به شکل زیر است:
```python
name = lambda parameters: expression
```
پس از آن با استفاده از name مشابه توابعی که پیشتر داشتیم، می‌توانیم از تابع لامبدا نیز استفاده کنیم. 
### کاربرد یک: کوتاه‌نویسی توابع یک خطی
به طور کلی یک کاربرد اولیه تابع لامبدا در جایی است که تابع ما مستقیماً برحسب ورودی‌ها، عملیات انجام داده و return می‌کند. مورد زیر مثال دیگری از این استفاده است:
```python
def name_print(name, family):
    return name.title() + " " + family.title()

name_print_lambda = lambda name, family: name.title()+" "+family.title()
```
### کاربرد دو: استفاده راحت‌تر به عنوان پارامتر توابع دیگر
کاربرد مهم دیگر تابع لامبدا این است که می‌توان آن را راحت‌تر به عنوان یک پارامتر به برخی از توابع داد. مثلاً تابع آماده `sort` این امکان را دارد که در آن مشخص کنید که بر چه اساس می‌خواهید مرتب‌سازی را انجام دهید. مثال زیر را درنظر بگیرید:
```python
names = ['Abbas Babaee', 'Mahmood Eskandari', 'Jafar Varaste', 'Yadi Sharifi', 'Manoochehr Mohagheghi']
names.sort()
```
در این حالت به طور عادی لیست با حرف اول رشته‌ها مرتب می‌شود. حال اگر بخواهیم لیست بر حسب نام خانوادگی مرتب شود، می‌توانیم به شکل زیر از تابع لامبدا استفاده کنیم:
```python
names.sort(key = lambda name: name.split()[-1])
```
### کاربرد سه: نوع داده تابع
تابع لامبدا به ما این امکان را می‌دهد که با یک تابع مثل متغیر رفتار کنیم. یعنی اگر قطعه کد زیر را اجرا کنید:
```python
myadd1 = lambda x,y: x+y
print(type(myadd1))
```
خروجی `<class 'function'>` خواهد شد. این موضوع، می‌تواند استفاده‌های گوناگونی برایمان داشته باشد، برای مثال می‌توانید تابعی داشته باشید که یک تابع به شما برگرداند:
```python
def func(n):
    return lambda a: a*n
# a*2
doubler = func(2)
print(doubler(3))
quintipler = func(5)
print(quintipler(3))
print(type(func(3)))
```
در قطعه کد بالا، تابع func گویی تابع سازنده‌ی چندبرابرساز است. یعنی مثلاً `func(2)` تابع دوبرابرساز را به ما برمی‌گرداند.

**مثال دیگر.** تابع محاسبه‌کننده قیمت با دادن زمان شروع و نرخ ساعتی
```python
def price_calc(start,hourly_rate):
    return lambda hours: start + hourly_rate * hours
    
walkin_cost = price_calc(10,30)
premium_cost = price_calc(1,25)
print(walkin_cost(2))
print(premium_cost(2))
```
### کاربرد چهار: تابع، از تولید به مصرف
به کمک تابع لامبدا، می‌توانیم درجا تابعی بنویسیم و همانجا از آن استفاده کنیم.
```python
print((lambda a,b,c: a+b+c)(2,3,4))
```
**مثال:** چندین متغیر
اگر چندین متغیر داشتیم می‌توانیم با unzip کردن به شکل زیر آن‌ها را استفاده کنیم:
```python
print((lambda *args: sum(args))(2,3,4,50))
```
